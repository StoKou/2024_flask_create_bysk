{"ast":null,"code":"import axios from 'axios';\nimport { ref } from 'vue';\nexport default {\n  name: 'PredictPage',\n  setup() {\n    const fileInput = ref(null);\n    const loading = ref(false);\n    let formData = new FormData();\n    const result = ref('');\n    const selectedModel = ref('model1');\n    const onFileChange = event => {\n      formData = new FormData();\n      formData.append('file', event.target.files[0]);\n    };\n    async function handleSubmit() {\n      loading.value = true;\n      try {\n        const url = `/api/predict/${selectedModel.value}`;\n        const response = await axios.post(url, formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        result.value = JSON.stringify(response.data, null, 2);\n        loading.value = false;\n      } catch (error) {\n        console.error(`Error predicting experiment data using ${selectedModel.value}:`, error);\n        loading.value = false;\n        alert('预测失败，请检查上传的文件格式或稍后再试...');\n      }\n    }\n    return {\n      fileInput,\n      loading,\n      result,\n      handleSubmit,\n      onFileChange,\n      selectedModel\n    };\n  }\n};","map":{"version":3,"names":["axios","ref","name","setup","fileInput","loading","formData","FormData","result","selectedModel","onFileChange","event","append","target","files","handleSubmit","value","url","response","post","headers","JSON","stringify","data","error","console","alert"],"sources":["E:\\VsCode\\Vue3\\vue0323\\frontend\\src\\components\\PredictPage.vue"],"sourcesContent":["<!-- predict.vue -->\r\n<template>\r\n  <div class=\"predict-page\">\r\n    <header>\r\n      <h1>实验数据预测</h1>\r\n    </header>\r\n    <section class=\"predict-content\">\r\n      <form @submit.prevent=\"handleSubmit\">\r\n        <input type=\"file\" ref=\"fileInput\" @change=\"onFileChange\" />\r\n        <label>\r\n          <input type=\"radio\" name=\"model\" value=\"model1\" v-model=\"selectedModel\" /> Model 1\r\n        </label>\r\n        <label>\r\n          <input type=\"radio\" name=\"model\" value=\"model2\" v-model=\"selectedModel\" /> Model 2\r\n        </label>\r\n        <button type=\"submit\">确定</button>\r\n      </form>\r\n      <div v-if=\"loading\">\r\n        <p>正在上传并预测...</p>\r\n      </div>\r\n      <div v-if=\"result && !loading\">\r\n        <h3>预测结果：</h3>\r\n        <pre>{{ result }}</pre>\r\n      </div>\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { ref } from 'vue';\r\n\r\nexport default {\r\n  name: 'PredictPage',\r\n  setup() {\r\n    const fileInput = ref(null);\r\n    const loading = ref(false);\r\n    let formData = new FormData();\r\n    const result = ref('');\r\n    const selectedModel = ref('model1');\r\n\r\n    const onFileChange = (event) => {\r\n      formData = new FormData();\r\n      formData.append('file', event.target.files[0]);\r\n    };\r\n\r\n    async function handleSubmit() {\r\n      loading.value = true;\r\n      try {\r\n        const url = `/api/predict/${selectedModel.value}`;\r\n        const response = await axios.post(url, formData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data',\r\n          },\r\n        });\r\n        result.value = JSON.stringify(response.data, null, 2);\r\n        loading.value = false;\r\n      } catch (error) {\r\n        console.error(`Error predicting experiment data using ${selectedModel.value}:`, error);\r\n        loading.value = false;\r\n        alert('预测失败，请检查上传的文件格式或稍后再试...');\r\n      }\r\n    }\r\n\r\n    return {\r\n      fileInput,\r\n      loading,\r\n      result,\r\n      handleSubmit,\r\n      onFileChange,\r\n      selectedModel,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.predict-page {\r\n  /* 样式代码 */\r\n}\r\n</style>"],"mappings":"AA6BA,OAAOA,KAAI,MAAO,OAAO;AACzB,SAASC,GAAE,QAAS,KAAK;AAEzB,eAAe;EACbC,IAAI,EAAE,aAAa;EACnBC,KAAKA,CAAA,EAAG;IACN,MAAMC,SAAQ,GAAIH,GAAG,CAAC,IAAI,CAAC;IAC3B,MAAMI,OAAM,GAAIJ,GAAG,CAAC,KAAK,CAAC;IAC1B,IAAIK,QAAO,GAAI,IAAIC,QAAQ,CAAC,CAAC;IAC7B,MAAMC,MAAK,GAAIP,GAAG,CAAC,EAAE,CAAC;IACtB,MAAMQ,aAAY,GAAIR,GAAG,CAAC,QAAQ,CAAC;IAEnC,MAAMS,YAAW,GAAKC,KAAK,IAAK;MAC9BL,QAAO,GAAI,IAAIC,QAAQ,CAAC,CAAC;MACzBD,QAAQ,CAACM,MAAM,CAAC,MAAM,EAAED,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC;IAChD,CAAC;IAED,eAAeC,YAAYA,CAAA,EAAG;MAC5BV,OAAO,CAACW,KAAI,GAAI,IAAI;MACpB,IAAI;QACF,MAAMC,GAAE,GAAK,gBAAeR,aAAa,CAACO,KAAM,EAAC;QACjD,MAAME,QAAO,GAAI,MAAMlB,KAAK,CAACmB,IAAI,CAACF,GAAG,EAAEX,QAAQ,EAAE;UAC/Cc,OAAO,EAAE;YACP,cAAc,EAAE;UAClB;QACF,CAAC,CAAC;QACFZ,MAAM,CAACQ,KAAI,GAAIK,IAAI,CAACC,SAAS,CAACJ,QAAQ,CAACK,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;QACrDlB,OAAO,CAACW,KAAI,GAAI,KAAK;MACvB,EAAE,OAAOQ,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAE,0CAAyCf,aAAa,CAACO,KAAM,GAAE,EAAEQ,KAAK,CAAC;QACtFnB,OAAO,CAACW,KAAI,GAAI,KAAK;QACrBU,KAAK,CAAC,yBAAyB,CAAC;MAClC;IACF;IAEA,OAAO;MACLtB,SAAS;MACTC,OAAO;MACPG,MAAM;MACNO,YAAY;MACZL,YAAY;MACZD;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}